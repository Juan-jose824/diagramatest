<?xml version="1.0" encoding="UTF-8"?>
<definitions
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
  xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL
                      http://www.omg.org/spec/BPMN/20100524/MODEL/BPMN20.xsd"
  id="Definitions_Credencializacion"
  targetNamespace="http://cignuz.com/credencializacion"
  exporter="Claude BPMN Generator"
  exporterVersion="3.0">

  <!-- ═══════════════════════════════════════════════════
       DEFINICIONES DE ERROR
  ═══════════════════════════════════════════════════ -->
  <error id="Error_CURP_Invalida"   name="CURP Inválida o Duplicada"        errorCode="ERR_CURP_001"/>
  <error id="Error_Biometria_Fallo" name="Verificación Biométrica Fallida"  errorCode="ERR_BIO_001"/>

  <!-- ═══════════════════════════════════════════════════
       DEFINICIÓN DE MENSAJE
  ═══════════════════════════════════════════════════ -->
  <message id="Msg_CodigoVerificacion" name="CodigoVerificacionEmail"/>

  <!-- ═══════════════════════════════════════════════════
       COLABORACIÓN
  ═══════════════════════════════════════════════════ -->
  <collaboration id="Collab_Credencializacion">
    <participant
      id="Pool_Credencializacion"
      name="Sistema de Credencialización Digital — Seguro Salud Jalisco"
      processRef="Proc_Credencializacion"/>
  </collaboration>

  <!-- ═══════════════════════════════════════════════════
       PROCESO PRINCIPAL
  ═══════════════════════════════════════════════════ -->
  <process
    id="Proc_Credencializacion"
    name="Credencialización Digital — Seguro Salud Jalisco"
    isExecutable="true"
    camunda:historyTimeToLive="P30D">

    <!-- ─────────────────────────────────────────────
         LANES
    ───────────────────────────────────────────── -->
    <laneSet id="LaneSet_1">

      <lane id="Lane_Ciudadano" name="Ciudadano (Portal de Credencialización)">
        <flowNodeRef>Start_Ciudadano</flowNodeRef>
        <flowNodeRef>Task_IngresarCURP</flowNodeRef>
        <flowNodeRef>Task_ConfirmarDatos</flowNodeRef>
        <flowNodeRef>Task_AceptarPrivacidad</flowNodeRef>
        <flowNodeRef>Task_IngresarCodigo</flowNodeRef>
        <flowNodeRef>Task_CrearContrasena</flowNodeRef>
        <flowNodeRef>Task_IniciarSesion</flowNodeRef>
        <flowNodeRef>Task_ActualizarContacto</flowNodeRef>
        <flowNodeRef>Task_CapturarINE</flowNodeRef>
        <flowNodeRef>Task_CapturarRostro</flowNodeRef>
        <flowNodeRef>Task_DescargarCredencial</flowNodeRef>
        <flowNodeRef>GW_MasDependientes</flowNodeRef>
        <flowNodeRef>Task_IngresarCURPDependiente</flowNodeRef>
        <flowNodeRef>Task_ConfirmarDatosDependiente</flowNodeRef>
        <flowNodeRef>Task_CerrarSesionCiudadano</flowNodeRef>
        <flowNodeRef>End_CredencialOK</flowNodeRef>
      </lane>

      <lane id="Lane_Sistema" name="Sistema / Plataforma (IDJalisco + Motor Biométrico)">
        <flowNodeRef>Task_ValidarCURP</flowNodeRef>
        <flowNodeRef>GW_CURPValida</flowNodeRef>
        <flowNodeRef>End_ErrorCURP</flowNodeRef>
        <flowNodeRef>Task_EnviarEmail</flowNodeRef>
        <flowNodeRef>Timer_EsperaEmail</flowNodeRef>
        <flowNodeRef>Task_ValidarCodigo</flowNodeRef>
        <flowNodeRef>GW_CodigoValido</flowNodeRef>
        <flowNodeRef>Task_ProcesarBiometria</flowNodeRef>
        <flowNodeRef>GW_BiometriaOK</flowNodeRef>
        <flowNodeRef>End_ErrorBiometria</flowNodeRef>
        <flowNodeRef>Task_GenerarCredencial</flowNodeRef>
        <flowNodeRef>Task_ValidarCURPDep</flowNodeRef>
        <flowNodeRef>GW_CURPDepValida</flowNodeRef>
        <flowNodeRef>Task_GenerarCredencialDep</flowNodeRef>
      </lane>

      <lane id="Lane_Brigadista" name="Brigadista (Herramienta para Brigadistas)">
        <flowNodeRef>Start_Brigadista</flowNodeRef>
        <flowNodeRef>Task_BrigIniciarSesion</flowNodeRef>
        <flowNodeRef>Task_BrigIngresarCURP</flowNodeRef>
        <flowNodeRef>Task_BrigConfirmarDatos</flowNodeRef>
        <flowNodeRef>Task_BrigGuardarPreregistro</flowNodeRef>
        <flowNodeRef>Task_BrigCerrarSesion</flowNodeRef>
        <flowNodeRef>End_BrigOK</flowNodeRef>
      </lane>

      <lane id="Lane_CoordRegional" name="Coordinador Regional (Herramienta para Brigadistas)">
        <flowNodeRef>Start_CoordRegional</flowNodeRef>
        <flowNodeRef>Task_CRIniciarSesion</flowNodeRef>
        <flowNodeRef>GW_CRAcciones</flowNodeRef>
        <flowNodeRef>Task_CRGestionarUsuarios</flowNodeRef>
        <flowNodeRef>Task_CRAdminRegistros</flowNodeRef>
        <flowNodeRef>Task_CREditarPreregistro</flowNodeRef>
        <flowNodeRef>Task_CRCambiarRegion</flowNodeRef>
        <flowNodeRef>Task_CRCerrarSesion</flowNodeRef>
        <flowNodeRef>End_CoordRegionalOK</flowNodeRef>
      </lane>

      <lane id="Lane_CoordEstatal" name="Coordinador Estatal (Herramienta para Brigadistas)">
        <flowNodeRef>Start_CoordEstatal</flowNodeRef>
        <flowNodeRef>Task_CEIniciarSesion</flowNodeRef>
        <flowNodeRef>GW_CEAcciones</flowNodeRef>
        <flowNodeRef>Task_CEGestionarUsuarios</flowNodeRef>
        <flowNodeRef>Task_CEAdminTodosRegistros</flowNodeRef>
        <flowNodeRef>Task_CEAsignarRegion</flowNodeRef>
        <flowNodeRef>Task_CECerrarSesion</flowNodeRef>
        <flowNodeRef>End_CoordEstatalOK</flowNodeRef>
      </lane>

    </laneSet>

    <!-- ═══════════════════════════════════════════════════
         LANE CIUDADANO — ELEMENTOS
    ═══════════════════════════════════════════════════ -->

    <startEvent id="Start_Ciudadano" name="Ciudadano solicita&#10;credencial digital">
      <outgoing>SF_01</outgoing>
    </startEvent>

    <userTask id="Task_IngresarCURP"
              name="Ingresar CURP&#10;y correo electrónico"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano accede al portal credencial.seguro.jalisco.gob.mx,
        selecciona "Quiero crear mi cuenta" e ingresa su CURP y correo
        electrónico (confirmado dos veces). Puede consultar su CURP si
        no la recuerda. RN-01, RN-02.
      </documentation>
      <incoming>SF_01</incoming>
      <outgoing>SF_02</outgoing>
    </userTask>

    <userTask id="Task_ConfirmarDatos"
              name="Confirmar datos personales&#10;(nombre, fecha nac., estado)"
              camunda:assignee="ciudadano">
      <documentation>
        El sistema muestra los datos vinculados a la CURP (nombre,
        apellidos, fecha de nacimiento, estado, sexo, edad). El ciudadano
        verifica y completa los campos faltantes. Los campos opcionales
        no bloquean el avance. RN-01.
      </documentation>
      <incoming>SF_04_OK</incoming>
      <outgoing>SF_05</outgoing>
    </userTask>

    <userTask id="Task_AceptarPrivacidad"
              name="Aceptar aviso de privacidad&#10;y confirmar sin seguridad social"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano acepta el Aviso de Privacidad y Uso de Datos.
        Debe confirmar que NO cuenta con seguridad social (IMSS, ISSSTE,
        etc.). De lo contrario, la credencial puede perder validez. RN-02.
      </documentation>
      <incoming>SF_05</incoming>
      <outgoing>SF_06</outgoing>
    </userTask>

    <userTask id="Task_IngresarCodigo"
              name="Ingresar código de&#10;verificación (6 dígitos)"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano revisa su correo (mensaje de IDJalisco para el
        Seguro de Salud Jalisco), copia o memoriza el código de 6
        dígitos e ingresa el código en el portal. Puede solicitar
        reenvío si no lo recibió. RN-03.
      </documentation>
      <incoming>SF_08</incoming>
      <outgoing>SF_09</outgoing>
    </userTask>

    <userTask id="Task_CrearContrasena"
              name="Crear contraseña&#10;de acceso al portal"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano establece una nueva contraseña. Debe coincidir en
        los dos campos. Al confirmar, la cuenta queda verificada y activa.
        Esta misma pantalla se utiliza para la recuperación de contraseña.
      </documentation>
      <incoming>SF_11_OK</incoming>
      <outgoing>SF_12</outgoing>
    </userTask>

    <userTask id="Task_IniciarSesion"
              name="Iniciar sesión en&#10;el portal de credencialización"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano ingresa su correo electrónico y contraseña en el
        formulario de acceso del portal y presiona "Ingresar".
        También aplica cuando el pre-registro fue creado por un brigadista
        y el ciudadano usa el flujo de recuperación de contraseña.
      </documentation>
      <incoming>SF_12</incoming>
      <incoming>SF_BrigDerivaCiudadano</incoming>
      <outgoing>SF_13</outgoing>
    </userTask>

    <userTask id="Task_ActualizarContacto"
              name="Actualizar datos de contacto&#10;(celular, domicilio, colonia)"
              camunda:assignee="ciudadano">
      <documentation>
        Desde el módulo Mis Credenciales, el ciudadano completa la
        información obligatoria de contacto: número de celular, estado,
        municipio, colonia o localidad, calle, número exterior,
        número interior y referencias. Los campos de residencia en
        el extranjero, foráneo o migrante son opcionales.
      </documentation>
      <incoming>SF_13</incoming>
      <outgoing>SF_14</outgoing>
    </userTask>

    <userTask id="Task_CapturarINE"
              name="Capturar foto de INE /&#10;identificación oficial"
              camunda:assignee="ciudadano">
      <documentation>
        FASE BIOMÉTRICA — Paso 1/2.
        El ciudadano captura con la cámara del dispositivo su INE
        (centrada en el recuadro) o la selecciona desde la galería.
        Verifica que la imagen sea nítida. Puede volver a tomar la foto
        si no cumple los requisitos de calidad. Confirma con el botón. RN-04.
      </documentation>
      <incoming>SF_14</incoming>
      <outgoing>SF_15</outgoing>
    </userTask>

    <userTask id="Task_CapturarRostro"
              name="Capturar foto de rostro&#10;(selfie biométrica)"
              camunda:assignee="ciudadano">
      <documentation>
        FASE BIOMÉTRICA — Paso 2/2.
        El ciudadano centra su rostro en el óvalo que aparece en
        pantalla y captura la imagen o la selecciona desde la galería.
        Verifica nitidez. Puede volver a tomar la foto. Confirma con el botón. RN-04.
      </documentation>
      <incoming>SF_15</incoming>
      <outgoing>SF_16</outgoing>
    </userTask>

    <userTask id="Task_DescargarCredencial"
              name="Descargar credencial&#10;(PDF o Apple Wallet)"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano puede descargar su credencial digital en formato
        PDF o bien agregarla directamente a Apple Wallet en dispositivos
        iOS. RN-09.
      </documentation>
      <incoming>SF_19</incoming>
      <outgoing>SF_20</outgoing>
    </userTask>

    <exclusiveGateway id="GW_MasDependientes" name="¿Desea agregar&#10;dependientes?">
      <incoming>SF_20</incoming>
      <incoming>SF_DepLoop</incoming>
      <outgoing>SF_21_SI</outgoing>
      <outgoing>SF_21_NO</outgoing>
    </exclusiveGateway>

    <userTask id="Task_IngresarCURPDependiente"
              name="Ingresar CURP del&#10;dependiente (Mis Dependientes)"
              camunda:assignee="ciudadano">
      <documentation>
        Desde el módulo Mis Dependientes, el ciudadano agrega un
        dependiente (menor de edad, adulto mayor) ingresando su CURP.
        El titular debe tener credencial activa para poder realizar esta acción.
        RN-05.
      </documentation>
      <incoming>SF_21_SI</incoming>
      <outgoing>SF_22</outgoing>
    </userTask>

    <userTask id="Task_ConfirmarDatosDependiente"
              name="Confirmar datos y parentesco&#10;del dependiente"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano confirma los datos del dependiente (nombre,
        fecha de nacimiento, estado, sexo, edad) y completa el campo
        de parentesco (padre, madre, hijo/a, etc.).
        Acepta el aviso de privacidad y confirma que no tiene seguridad social.
      </documentation>
      <incoming>SF_24_OK</incoming>
      <outgoing>SF_25</outgoing>
    </userTask>

    <userTask id="Task_CerrarSesionCiudadano"
              name="Cerrar sesión en&#10;el portal"
              camunda:assignee="ciudadano">
      <documentation>
        El ciudadano cierra su sesión activa en el portal de
        credencialización presionando el ícono de cierre de sesión.
      </documentation>
      <incoming>SF_21_NO</incoming>
      <outgoing>SF_26</outgoing>
    </userTask>

    <endEvent id="End_CredencialOK" name="Credencial digital&#10;generada exitosamente">
      <incoming>SF_26</incoming>
    </endEvent>

    <!-- ═══════════════════════════════════════════════════
         LANE SISTEMA — ELEMENTOS
    ═══════════════════════════════════════════════════ -->

    <serviceTask id="Task_ValidarCURP"
                 name="Validar CURP en sistema&#10;(RENAPO / BD local)"
                 camunda:type="external"
                 camunda:topic="validar-curp">
      <documentation>
        El sistema verifica que la CURP tenga formato válido y que no
        esté asociada a una credencial activa en la base de datos.
        Si ya existe credencial ligada, se muestra mensaje informativo.
        RN-01.
      </documentation>
      <incoming>SF_02</incoming>
      <outgoing>SF_03</outgoing>
    </serviceTask>

    <exclusiveGateway id="GW_CURPValida" name="¿CURP válida&#10;y disponible?">
      <incoming>SF_03</incoming>
      <outgoing>SF_04_OK</outgoing>
      <outgoing>SF_04_ERR</outgoing>
    </exclusiveGateway>

    <endEvent id="End_ErrorCURP" name="ERROR: CURP inválida&#10;o ya registrada">
      <incoming>SF_04_ERR</incoming>
      <errorEventDefinition id="EED_CURP" errorRef="Error_CURP_Invalida"/>
    </endEvent>

    <serviceTask id="Task_EnviarEmail"
                 name="Enviar código de verificación&#10;por correo (IDJalisco)"
                 camunda:type="external"
                 camunda:topic="enviar-email-verificacion">
      <documentation>
        El sistema envía un código de 6 dígitos al correo registrado
        a través de IDJalisco. El ciudadano puede solicitar reenvío
        si no lo recibe. RN-03.
      </documentation>
      <incoming>SF_06</incoming>
      <incoming>SF_11_Reenviar</incoming>
      <outgoing>SF_07</outgoing>
    </serviceTask>

    <intermediateCatchEvent id="Timer_EsperaEmail"
                            name="Esperar recepción&#10;del código de verificación">
      <incoming>SF_07</incoming>
      <outgoing>SF_08</outgoing>
      <timerEventDefinition id="TED_Email"/>
    </intermediateCatchEvent>

    <serviceTask id="Task_ValidarCodigo"
                 name="Validar código de&#10;verificación ingresado"
                 camunda:type="external"
                 camunda:topic="validar-codigo">
      <documentation>
        El sistema compara el código ingresado contra el generado para
        la sesión de ese correo. Resultado: válido o inválido.
      </documentation>
      <incoming>SF_09</incoming>
      <outgoing>SF_10</outgoing>
    </serviceTask>

    <exclusiveGateway id="GW_CodigoValido" name="¿Código de verificación&#10;correcto?">
      <incoming>SF_10</incoming>
      <outgoing>SF_11_OK</outgoing>
      <outgoing>SF_11_Reenviar</outgoing>
    </exclusiveGateway>

    <serviceTask id="Task_ProcesarBiometria"
                 name="Procesar y comparar&#10;datos biométricos con INE"
                 camunda:type="external"
                 camunda:topic="procesar-biometria">
      <documentation>
        El sistema extrae la plantilla biométrica facial del rostro
        capturado y la compara con la foto almacenada en la INE
        proporcionada. Verifica que la persona sea quien dice ser.
        Resultado: exitoso o fallido. RN-04.
      </documentation>
      <incoming>SF_16</incoming>
      <outgoing>SF_17</outgoing>
    </serviceTask>

    <exclusiveGateway id="GW_BiometriaOK" name="¿Verificación&#10;biométrica exitosa?">
      <incoming>SF_17</incoming>
      <outgoing>SF_18_OK</outgoing>
      <outgoing>SF_18_ERR</outgoing>
    </exclusiveGateway>

    <endEvent id="End_ErrorBiometria" name="ERROR: Verificación&#10;biométrica fallida">
      <incoming>SF_18_ERR</incoming>
      <errorEventDefinition id="EED_Bio" errorRef="Error_Biometria_Fallo"/>
    </endEvent>

    <serviceTask id="Task_GenerarCredencial"
                 name="Generar credencial digital&#10;(foto, nombre, CURP, QR)"
                 camunda:type="external"
                 camunda:topic="generar-credencial">
      <documentation>
        El sistema genera la credencial digital con: foto verificada,
        nombre completo, CURP, folio de credencial y código QR
        vinculado a los servicios de salud del Gobierno de Jalisco.
        La credencial permite acceder a unidades de salud del estado.
        RN-09.
      </documentation>
      <incoming>SF_18_OK</incoming>
      <outgoing>SF_19</outgoing>
    </serviceTask>

    <serviceTask id="Task_ValidarCURPDep"
                 name="Validar CURP del dependiente&#10;en sistema"
                 camunda:type="external"
                 camunda:topic="validar-curp-dependiente">
      <documentation>
        El sistema verifica la CURP del dependiente: valida el formato
        y que no tenga ya una credencial activa asociada.
      </documentation>
      <incoming>SF_22</incoming>
      <outgoing>SF_23</outgoing>
    </serviceTask>

    <exclusiveGateway id="GW_CURPDepValida" name="¿CURP del dependiente&#10;válida?">
      <incoming>SF_23</incoming>
      <outgoing>SF_24_OK</outgoing>
      <outgoing>SF_24_ERR_Loop</outgoing>
    </exclusiveGateway>

    <serviceTask id="Task_GenerarCredencialDep"
                 name="Generar credencial digital&#10;del dependiente"
                 camunda:type="external"
                 camunda:topic="generar-credencial-dependiente">
      <documentation>
        El sistema genera la credencial digital del dependiente.
        Puede descargarse en PDF o agregarse a Apple Wallet.
        El sistema regresa al gateway para preguntar si hay más
        dependientes. RN-05, RN-09.
      </documentation>
      <incoming>SF_25</incoming>
      <outgoing>SF_DepLoop</outgoing>
    </serviceTask>

    <!-- ═══════════════════════════════════════════════════
         LANE BRIGADISTA — ELEMENTOS
    ═══════════════════════════════════════════════════ -->

    <startEvent id="Start_Brigadista" name="Brigadista inicia&#10;pre-registro en campo">
      <outgoing>SFB_01</outgoing>
    </startEvent>

    <userTask id="Task_BrigIniciarSesion"
              name="Iniciar sesión en herramienta&#10;para brigadistas"
              camunda:assignee="brigadista">
      <documentation>
        El brigadista accede a brigadas.seguro.jalisco.gob.mx e
        ingresa su nombre de usuario y contraseña. La pantalla
        muestra la región sanitaria asignada y el nombre del usuario.
      </documentation>
      <incoming>SFB_01</incoming>
      <outgoing>SFB_02</outgoing>
    </userTask>

    <userTask id="Task_BrigIngresarCURP"
              name="Ingresar CURP del ciudadano&#10;en módulo Crear Pre-registro"
              camunda:assignee="brigadista">
      <documentation>
        El brigadista accede al módulo Crear Pre-registro e ingresa
        la CURP del ciudadano. Puede consultar la CURP si no la
        tiene a la mano. RN-01.
      </documentation>
      <incoming>SFB_02</incoming>
      <outgoing>SFB_03</outgoing>
    </userTask>

    <userTask id="Task_BrigConfirmarDatos"
              name="Confirmar y completar datos&#10;personales del ciudadano"
              camunda:assignee="brigadista">
      <documentation>
        El brigadista verifica y completa los datos personales del
        ciudadano mostrados a partir de la CURP. Los campos opcionales
        no son requeridos para continuar.
      </documentation>
      <incoming>SFB_03</incoming>
      <outgoing>SFB_04</outgoing>
    </userTask>

    <userTask id="Task_BrigGuardarPreregistro"
              name="Guardar pre-registro en&#10;región sanitaria del brigadista"
              camunda:assignee="brigadista">
      <documentation>
        El brigadista confirma y guarda el pre-registro. Queda
        almacenado en la región sanitaria asignada al brigadista
        que realizó la inscripción. El ciudadano debe completar
        el registro en el portal usando el flujo de recuperación
        de contraseña.
      </documentation>
      <incoming>SFB_04</incoming>
      <outgoing>SFB_05</outgoing>
      <outgoing>SF_BrigDerivaCiudadano</outgoing>
    </userTask>

    <userTask id="Task_BrigCerrarSesion"
              name="Cerrar sesión en herramienta&#10;para brigadistas"
              camunda:assignee="brigadista">
      <documentation>
        El brigadista cierra sesión al terminar. Se recomienda
        siempre cerrar sesión si se trabaja en un equipo compartido.
      </documentation>
      <incoming>SFB_05</incoming>
      <outgoing>SFB_06</outgoing>
    </userTask>

    <endEvent id="End_BrigOK" name="Pre-registro guardado&#10;exitosamente">
      <incoming>SFB_06</incoming>
    </endEvent>

    <!-- ═══════════════════════════════════════════════════
         LANE COORDINADOR REGIONAL — ELEMENTOS
    ═══════════════════════════════════════════════════ -->

    <startEvent id="Start_CoordRegional" name="Coordinador Regional&#10;accede al sistema">
      <outgoing>SFCR_01</outgoing>
    </startEvent>

    <userTask id="Task_CRIniciarSesion"
              name="Iniciar sesión en herramienta&#10;para brigadistas"
              camunda:assignee="coordinadorRegional">
      <documentation>
        El Coordinador Regional accede con sus credenciales.
        Tiene acceso a todos los módulos pero restringido a su
        región sanitaria. RN-06.
      </documentation>
      <incoming>SFCR_01</incoming>
      <outgoing>SFCR_02</outgoing>
    </userTask>

    <exclusiveGateway id="GW_CRAcciones" name="¿Acción a realizar?">
      <incoming>SFCR_02</incoming>
      <outgoing>SFCR_03a</outgoing>
      <outgoing>SFCR_03b</outgoing>
      <outgoing>SFCR_03c</outgoing>
      <outgoing>SFCR_03d</outgoing>
    </exclusiveGateway>

    <userTask id="Task_CRGestionarUsuarios"
              name="Gestionar usuarios de&#10;su región (crear/editar brigadistas)"
              camunda:assignee="coordinadorRegional">
      <documentation>
        Puede crear y editar brigadistas asignados únicamente a
        su misma región sanitaria. NO puede modificar coordinadores
        estatales ni usuarios de otras regiones. El campo username
        no puede modificarse. RN-06, RN-08.
      </documentation>
      <incoming>SFCR_03a</incoming>
      <outgoing>SFCR_04a</outgoing>
    </userTask>

    <userTask id="Task_CRAdminRegistros"
              name="Administrar pre-registros&#10;de su región sanitaria"
              camunda:assignee="coordinadorRegional">
      <documentation>
        Ve y puede aprobar los pre-registros asignados exclusivamente
        a su región sanitaria. No puede ver registros de otras
        regiones. RN-06.
      </documentation>
      <incoming>SFCR_03b</incoming>
      <outgoing>SFCR_04b</outgoing>
    </userTask>

    <userTask id="Task_CREditarPreregistro"
              name="Editar datos de un&#10;pre-registro de su región"
              camunda:assignee="coordinadorRegional">
      <documentation>
        Edita campos no identificadores de pre-registros de su
        región. Los campos que identifican el registro (como CURP)
        no pueden modificarse. RN-06.
      </documentation>
      <incoming>SFCR_03c</incoming>
      <outgoing>SFCR_04c</outgoing>
    </userTask>

    <userTask id="Task_CRCambiarRegion"
              name="Cambiar región sanitaria&#10;de un usuario de su región"
              camunda:assignee="coordinadorRegional">
      <documentation>
        Puede actualizar la región sanitaria de brigadistas de su
        propia región. Acción que puede realizarse cuantas veces
        sea necesario. RN-10.
      </documentation>
      <incoming>SFCR_03d</incoming>
      <outgoing>SFCR_04d</outgoing>
    </userTask>

    <userTask id="Task_CRCerrarSesion"
              name="Cerrar sesión"
              camunda:assignee="coordinadorRegional">
      <incoming>SFCR_04a</incoming>
      <incoming>SFCR_04b</incoming>
      <incoming>SFCR_04c</incoming>
      <incoming>SFCR_04d</incoming>
      <outgoing>SFCR_05</outgoing>
    </userTask>

    <endEvent id="End_CoordRegionalOK" name="Gestión regional&#10;completada">
      <incoming>SFCR_05</incoming>
    </endEvent>

    <!-- ═══════════════════════════════════════════════════
         LANE COORDINADOR ESTATAL — ELEMENTOS
    ═══════════════════════════════════════════════════ -->

    <startEvent id="Start_CoordEstatal" name="Coordinador Estatal&#10;accede al sistema">
      <outgoing>SFCE_01</outgoing>
    </startEvent>

    <userTask id="Task_CEIniciarSesion"
              name="Iniciar sesión en herramienta&#10;para brigadistas"
              camunda:assignee="coordinadorEstatal">
      <documentation>
        El Coordinador Estatal tiene acceso total sin restricción
        de región. Puede ver y modificar todo en la plataforma.
      </documentation>
      <incoming>SFCE_01</incoming>
      <outgoing>SFCE_02</outgoing>
    </userTask>

    <exclusiveGateway id="GW_CEAcciones" name="¿Acción a realizar?">
      <incoming>SFCE_02</incoming>
      <outgoing>SFCE_03a</outgoing>
      <outgoing>SFCE_03b</outgoing>
      <outgoing>SFCE_03c</outgoing>
    </exclusiveGateway>

    <userTask id="Task_CEGestionarUsuarios"
              name="Gestionar TODOS los usuarios&#10;de la plataforma (todas las regiones)"
              camunda:assignee="coordinadorEstatal">
      <documentation>
        Puede crear y editar coordinadores regionales y brigadistas
        de cualquier región sanitaria, sin restricción geográfica.
        El campo username no puede modificarse una vez creado. RN-08.
      </documentation>
      <incoming>SFCE_03a</incoming>
      <outgoing>SFCE_04a</outgoing>
    </userTask>

    <userTask id="Task_CEAdminTodosRegistros"
              name="Administrar TODOS los&#10;pre-registros del sistema"
              camunda:assignee="coordinadorEstatal">
      <documentation>
        Tiene acceso completo a todos los pre-registros del sistema
        independientemente de la región sanitaria. Puede ver,
        aprobar y editar cualquier registro.
      </documentation>
      <incoming>SFCE_03b</incoming>
      <outgoing>SFCE_04b</outgoing>
    </userTask>

    <userTask id="Task_CEAsignarRegion"
              name="Asignar / cambiar región&#10;sanitaria a cualquier usuario"
              camunda:assignee="coordinadorEstatal">
      <documentation>
        Puede cambiar la región sanitaria de cualquier usuario de
        la plataforma (coordinadores regionales o brigadistas) sin
        restricción. Acción repetible cuantas veces sea necesario.
        RN-10.
      </documentation>
      <incoming>SFCE_03c</incoming>
      <outgoing>SFCE_04c</outgoing>
    </userTask>

    <userTask id="Task_CECerrarSesion"
              name="Cerrar sesión"
              camunda:assignee="coordinadorEstatal">
      <incoming>SFCE_04a</incoming>
      <incoming>SFCE_04b</incoming>
      <incoming>SFCE_04c</incoming>
      <outgoing>SFCE_05</outgoing>
    </userTask>

    <endEvent id="End_CoordEstatalOK" name="Gestión estatal&#10;completada">
      <incoming>SFCE_05</incoming>
    </endEvent>

    <!-- ═══════════════════════════════════════════════════
         FLUJOS DE SECUENCIA — CIUDADANO
         Paso horizontal: 160px  |  Tareas: 120×80
         x base inicio: 100
    ═══════════════════════════════════════════════════ -->
    <!-- x de cada elemento (centro):
         Start      : 100  (36×36  → borde izq 82)
         IngresarCURP: 220 (120×80 → borde izq 160)
         ValidarCURP : 220 (Sistema, mismo x)
         GW_CURP     : 390 (50×50  → borde izq 365)
         ConfirmarDatos: 530 (→ borde izq 470)
         AceptarPrivacidad: 690 (→ 630)
         EnviarEmail : 690 (Sistema)
         Timer       : 840 (36×36  → 822)
         IngresarCodigo: 940 (→ 880)
         ValidarCodigo : 940 (Sistema)
         GW_Codigo   : 1100 (→ 1075)
         CrearContrasena: 1230 (→ 1170)
         IniciarSesion: 1390 (→ 1330)
         ActualizarContacto: 1550 (→ 1490)
         CapturarINE : 1710 (→ 1650)
         CapturarRostro: 1870 (→ 1810)
         ProcesarBio : 1870 (Sistema)
         GW_Bio      : 2030 (→ 2005)
         GenerarCred : 2190 (→ 2130)
         DescargarCred: 2190 (Ciudadano, mismo x)
         GW_MasDep   : 2350 (→ 2325)
         IngresarCURPDep: 2510 (→ 2450)
         ValidarCURPDep: 2510 (Sistema)
         GW_CURPDep  : 2670 (→ 2645)
         ConfirmarDatosDep: 2830 (→ 2770)
         GenCredDep  : 2830 (Sistema)
         CerrarSesion: 2990 (→ 2930)
         End_OK      : 3130 (→ 3112)
    -->

    <sequenceFlow id="SF_01" sourceRef="Start_Ciudadano"     targetRef="Task_IngresarCURP"/>
    <sequenceFlow id="SF_02" sourceRef="Task_IngresarCURP"   targetRef="Task_ValidarCURP"/>
    <sequenceFlow id="SF_03" sourceRef="Task_ValidarCURP"    targetRef="GW_CURPValida"/>

    <sequenceFlow id="SF_04_OK"  name="Sí — CURP válida y libre"
                  sourceRef="GW_CURPValida" targetRef="Task_ConfirmarDatos">
      <conditionExpression xsi:type="tFormalExpression">${curpValida == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="SF_04_ERR" name="No — CURP inválida o ya registrada"
                  sourceRef="GW_CURPValida" targetRef="End_ErrorCURP">
      <conditionExpression xsi:type="tFormalExpression">${curpValida == false}</conditionExpression>
    </sequenceFlow>

    <sequenceFlow id="SF_05"  sourceRef="Task_ConfirmarDatos"    targetRef="Task_AceptarPrivacidad"/>
    <sequenceFlow id="SF_06"  sourceRef="Task_AceptarPrivacidad" targetRef="Task_EnviarEmail"/>
    <sequenceFlow id="SF_07"  sourceRef="Task_EnviarEmail"       targetRef="Timer_EsperaEmail"/>
    <sequenceFlow id="SF_08"  sourceRef="Timer_EsperaEmail"      targetRef="Task_IngresarCodigo"/>
    <sequenceFlow id="SF_09"  sourceRef="Task_IngresarCodigo"    targetRef="Task_ValidarCodigo"/>
    <sequenceFlow id="SF_10"  sourceRef="Task_ValidarCodigo"     targetRef="GW_CodigoValido"/>

    <sequenceFlow id="SF_11_OK" name="Sí — código correcto"
                  sourceRef="GW_CodigoValido" targetRef="Task_CrearContrasena">
      <conditionExpression xsi:type="tFormalExpression">${codigoValido == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="SF_11_Reenviar" name="No — reenviar código"
                  sourceRef="GW_CodigoValido" targetRef="Task_EnviarEmail">
      <conditionExpression xsi:type="tFormalExpression">${codigoValido == false}</conditionExpression>
    </sequenceFlow>

    <sequenceFlow id="SF_12"  sourceRef="Task_CrearContrasena"    targetRef="Task_IniciarSesion"/>
    <sequenceFlow id="SF_13"  sourceRef="Task_IniciarSesion"      targetRef="Task_ActualizarContacto"/>
    <sequenceFlow id="SF_14"  sourceRef="Task_ActualizarContacto" targetRef="Task_CapturarINE"/>
    <sequenceFlow id="SF_15"  sourceRef="Task_CapturarINE"        targetRef="Task_CapturarRostro"/>
    <sequenceFlow id="SF_16"  sourceRef="Task_CapturarRostro"     targetRef="Task_ProcesarBiometria"/>
    <sequenceFlow id="SF_17"  sourceRef="Task_ProcesarBiometria"  targetRef="GW_BiometriaOK"/>

    <sequenceFlow id="SF_18_OK" name="Sí — biometría exitosa"
                  sourceRef="GW_BiometriaOK" targetRef="Task_GenerarCredencial">
      <conditionExpression xsi:type="tFormalExpression">${biometriaOK == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="SF_18_ERR" name="No — biometría fallida"
                  sourceRef="GW_BiometriaOK" targetRef="End_ErrorBiometria">
      <conditionExpression xsi:type="tFormalExpression">${biometriaOK == false}</conditionExpression>
    </sequenceFlow>

    <sequenceFlow id="SF_19"  sourceRef="Task_GenerarCredencial"   targetRef="Task_DescargarCredencial"/>
    <sequenceFlow id="SF_20"  sourceRef="Task_DescargarCredencial" targetRef="GW_MasDependientes"/>

    <sequenceFlow id="SF_21_SI" name="Sí — agregar dependiente"
                  sourceRef="GW_MasDependientes" targetRef="Task_IngresarCURPDependiente">
      <conditionExpression xsi:type="tFormalExpression">${agregarDependiente == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="SF_21_NO" name="No — finalizar"
                  sourceRef="GW_MasDependientes" targetRef="Task_CerrarSesionCiudadano">
      <conditionExpression xsi:type="tFormalExpression">${agregarDependiente == false}</conditionExpression>
    </sequenceFlow>

    <sequenceFlow id="SF_22"  sourceRef="Task_IngresarCURPDependiente" targetRef="Task_ValidarCURPDep"/>
    <sequenceFlow id="SF_23"  sourceRef="Task_ValidarCURPDep"          targetRef="GW_CURPDepValida"/>

    <sequenceFlow id="SF_24_OK" name="Sí — CURP dependiente válida"
                  sourceRef="GW_CURPDepValida" targetRef="Task_ConfirmarDatosDependiente">
      <conditionExpression xsi:type="tFormalExpression">${curpDepValida == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="SF_24_ERR_Loop" name="No — reingresar CURP"
                  sourceRef="GW_CURPDepValida" targetRef="Task_IngresarCURPDependiente">
      <conditionExpression xsi:type="tFormalExpression">${curpDepValida == false}</conditionExpression>
    </sequenceFlow>

    <sequenceFlow id="SF_25"     sourceRef="Task_ConfirmarDatosDependiente" targetRef="Task_GenerarCredencialDep"/>
    <sequenceFlow id="SF_DepLoop" sourceRef="Task_GenerarCredencialDep"     targetRef="GW_MasDependientes"/>
    <sequenceFlow id="SF_26"     sourceRef="Task_CerrarSesionCiudadano"     targetRef="End_CredencialOK"/>

    <!-- ═══════════════════════════════════════════════════
         FLUJOS DE SECUENCIA — BRIGADISTA
    ═══════════════════════════════════════════════════ -->
    <sequenceFlow id="SFB_01" sourceRef="Start_Brigadista"            targetRef="Task_BrigIniciarSesion"/>
    <sequenceFlow id="SFB_02" sourceRef="Task_BrigIniciarSesion"      targetRef="Task_BrigIngresarCURP"/>
    <sequenceFlow id="SFB_03" sourceRef="Task_BrigIngresarCURP"       targetRef="Task_BrigConfirmarDatos"/>
    <sequenceFlow id="SFB_04" sourceRef="Task_BrigConfirmarDatos"     targetRef="Task_BrigGuardarPreregistro"/>
    <sequenceFlow id="SFB_05" sourceRef="Task_BrigGuardarPreregistro" targetRef="Task_BrigCerrarSesion"/>
    <sequenceFlow id="SFB_06" sourceRef="Task_BrigCerrarSesion"       targetRef="End_BrigOK"/>

    <sequenceFlow id="SF_BrigDerivaCiudadano"
                  name="Ciudadano completa registro&#10;en portal (recuperar contraseña)"
                  sourceRef="Task_BrigGuardarPreregistro"
                  targetRef="Task_IniciarSesion"/>

    <!-- ═══════════════════════════════════════════════════
         FLUJOS DE SECUENCIA — COORDINADOR REGIONAL
    ═══════════════════════════════════════════════════ -->
    <sequenceFlow id="SFCR_01"  sourceRef="Start_CoordRegional"     targetRef="Task_CRIniciarSesion"/>
    <sequenceFlow id="SFCR_02"  sourceRef="Task_CRIniciarSesion"    targetRef="GW_CRAcciones"/>
    <sequenceFlow id="SFCR_03a" name="Gestionar usuarios"           sourceRef="GW_CRAcciones" targetRef="Task_CRGestionarUsuarios"/>
    <sequenceFlow id="SFCR_03b" name="Administrar registros"        sourceRef="GW_CRAcciones" targetRef="Task_CRAdminRegistros"/>
    <sequenceFlow id="SFCR_03c" name="Editar pre-registro"          sourceRef="GW_CRAcciones" targetRef="Task_CREditarPreregistro"/>
    <sequenceFlow id="SFCR_03d" name="Cambiar región"               sourceRef="GW_CRAcciones" targetRef="Task_CRCambiarRegion"/>
    <sequenceFlow id="SFCR_04a" sourceRef="Task_CRGestionarUsuarios" targetRef="Task_CRCerrarSesion"/>
    <sequenceFlow id="SFCR_04b" sourceRef="Task_CRAdminRegistros"    targetRef="Task_CRCerrarSesion"/>
    <sequenceFlow id="SFCR_04c" sourceRef="Task_CREditarPreregistro" targetRef="Task_CRCerrarSesion"/>
    <sequenceFlow id="SFCR_04d" sourceRef="Task_CRCambiarRegion"     targetRef="Task_CRCerrarSesion"/>
    <sequenceFlow id="SFCR_05"  sourceRef="Task_CRCerrarSesion"      targetRef="End_CoordRegionalOK"/>

    <!-- ═══════════════════════════════════════════════════
         FLUJOS DE SECUENCIA — COORDINADOR ESTATAL
    ═══════════════════════════════════════════════════ -->
    <sequenceFlow id="SFCE_01"  sourceRef="Start_CoordEstatal"         targetRef="Task_CEIniciarSesion"/>
    <sequenceFlow id="SFCE_02"  sourceRef="Task_CEIniciarSesion"       targetRef="GW_CEAcciones"/>
    <sequenceFlow id="SFCE_03a" name="Gestionar usuarios"              sourceRef="GW_CEAcciones" targetRef="Task_CEGestionarUsuarios"/>
    <sequenceFlow id="SFCE_03b" name="Administrar todos los registros" sourceRef="GW_CEAcciones" targetRef="Task_CEAdminTodosRegistros"/>
    <sequenceFlow id="SFCE_03c" name="Asignar región"                  sourceRef="GW_CEAcciones" targetRef="Task_CEAsignarRegion"/>
    <sequenceFlow id="SFCE_04a" sourceRef="Task_CEGestionarUsuarios"   targetRef="Task_CECerrarSesion"/>
    <sequenceFlow id="SFCE_04b" sourceRef="Task_CEAdminTodosRegistros" targetRef="Task_CECerrarSesion"/>
    <sequenceFlow id="SFCE_04c" sourceRef="Task_CEAsignarRegion"       targetRef="Task_CECerrarSesion"/>
    <sequenceFlow id="SFCE_05"  sourceRef="Task_CECerrarSesion"        targetRef="End_CoordEstatalOK"/>

  </process>

  <!-- ═══════════════════════════════════════════════════════════════
       BPMNDI — DIAGRAMA VISUAL

       LAYOUT:
         Pool total : x=10, y=10, w=3270, h=1150
         Lane label col: 30px (x=10..40)
         Contenido empieza en x=40

         LANES (y de inicio, altura):
           Ciudadano    : y=  10, h=220  → centro y=120
           Sistema      : y= 230, h=200  → centro y=330
           Brigadista   : y= 430, h=160  → centro y=510
           Coord.Regional: y= 590, h=290  → 4 tareas apiladas
           Coord.Estatal : y= 880, h=280  → 3 tareas apiladas

         COLUMNAS (x borde izq de tarea/gateway, paso=160):
           Col 01 Start    :  82  (evento 36px)
           Col 02 T01/S01  : 160  (tarea 120px → centro 220)
           Col 03 GW_CURP  : 365  (gw 50px → centro 390)
           Col 04 T02      : 470  (tarea → centro 530)
           Col 05 T03/S02  : 630  (→ centro 690)
           Col 06 Timer    : 822  (→ centro 840)
           Col 07 T04/S03  : 880  (→ centro 940)
           Col 08 GW_COD   :1075  (→ centro 1100)
           Col 09 T05      :1170  (→ centro 1230)
           Col 10 T06      :1330  (→ centro 1390)
           Col 11 T07      :1490  (→ centro 1550)
           Col 12 T08      :1650  (→ centro 1710)
           Col 13 T09/S04  :1810  (→ centro 1870)
           Col 14 GW_BIO   :2005  (→ centro 2030)
           Col 15 S05/T10  :2130  (→ centro 2190)
           Col 16 GW_DEP   :2325  (→ centro 2350)
           Col 17 T11/S06  :2450  (→ centro 2510)
           Col 18 GW_CURDEP:2645  (→ centro 2670)
           Col 19 T12/S07  :2770  (→ centro 2830)
           Col 20 T13      :2930  (→ centro 2990)
           Col 21 End_OK   :3112  (→ centro 3130)

         ERROR ENDS: debajo de la lane Sistema (y=430 aprox)
  ═══════════════════════════════════════════════════════════════ -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collab_Credencializacion">

      <!-- ── POOL ── -->
      <bpmndi:BPMNShape id="Shape_Pool" bpmnElement="Pool_Credencializacion" isHorizontal="true">
        <dc:Bounds x="10" y="10" width="3270" height="1150"/>
        <bpmndi:BPMNLabel><dc:Bounds x="10" y="10" width="30" height="1150"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ── LANES ── -->
      <bpmndi:BPMNShape id="Shape_Lane_Ciudadano" bpmnElement="Lane_Ciudadano" isHorizontal="true">
        <dc:Bounds x="40" y="10"  width="3230" height="220"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_Sistema" bpmnElement="Lane_Sistema" isHorizontal="true">
        <dc:Bounds x="40" y="230" width="3230" height="200"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_Brigadista" bpmnElement="Lane_Brigadista" isHorizontal="true">
        <dc:Bounds x="40" y="430" width="3230" height="160"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_CoordRegional" bpmnElement="Lane_CoordRegional" isHorizontal="true">
        <dc:Bounds x="40" y="590" width="3230" height="290"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_CoordEstatal" bpmnElement="Lane_CoordEstatal" isHorizontal="true">
        <dc:Bounds x="40" y="880" width="3230" height="280"/>
      </bpmndi:BPMNShape>

      <!-- ══════════════════════════════════════════
           LANE CIUDADANO — SHAPES
           Lane y=10, h=220  → tareas en y=80, alto 80  → centro y=120
      ══════════════════════════════════════════ -->

      <!-- Start ciudadano: centro x=100, y=120 -->
      <bpmndi:BPMNShape id="Shape_Start_Ciudadano" bpmnElement="Start_Ciudadano">
        <dc:Bounds x="82" y="102" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="56" y="145" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- T01 Ingresar CURP: x=160, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_IngresarCURP" bpmnElement="Task_IngresarCURP">
        <dc:Bounds x="160" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T02 Confirmar datos: x=470, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_ConfirmarDatos" bpmnElement="Task_ConfirmarDatos">
        <dc:Bounds x="470" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T03 Aceptar privacidad: x=630, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_AceptarPrivacidad" bpmnElement="Task_AceptarPrivacidad">
        <dc:Bounds x="630" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T04 Ingresar código: x=880, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_IngresarCodigo" bpmnElement="Task_IngresarCodigo">
        <dc:Bounds x="880" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T05 Crear contraseña: x=1170, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_CrearContrasena" bpmnElement="Task_CrearContrasena">
        <dc:Bounds x="1170" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T06 Iniciar sesión: x=1330, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_IniciarSesion" bpmnElement="Task_IniciarSesion">
        <dc:Bounds x="1330" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T07 Actualizar contacto: x=1490, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_ActualizarContacto" bpmnElement="Task_ActualizarContacto">
        <dc:Bounds x="1490" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T08 Capturar INE: x=1650, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_CapturarINE" bpmnElement="Task_CapturarINE">
        <dc:Bounds x="1650" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T09 Capturar rostro: x=1810, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_CapturarRostro" bpmnElement="Task_CapturarRostro">
        <dc:Bounds x="1810" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T10 Descargar credencial: x=2130, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_DescargarCredencial" bpmnElement="Task_DescargarCredencial">
        <dc:Bounds x="2130" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW Más dependientes: x=2325, centro y=120 -->
      <bpmndi:BPMNShape id="Shape_GW_MasDependientes" bpmnElement="GW_MasDependientes" isMarkerVisible="true">
        <dc:Bounds x="2325" y="95" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2290" y="152" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- T11 Ingresar CURP dependiente: x=2450, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_IngresarCURPDep" bpmnElement="Task_IngresarCURPDependiente">
        <dc:Bounds x="2450" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T12 Confirmar datos dependiente: x=2770, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_ConfirmarDatosDep" bpmnElement="Task_ConfirmarDatosDependiente">
        <dc:Bounds x="2770" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- T13 Cerrar sesión: x=2930, y=80 -->
      <bpmndi:BPMNShape id="Shape_Task_CerrarSesionCiudadano" bpmnElement="Task_CerrarSesionCiudadano">
        <dc:Bounds x="2930" y="80" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- End OK: centro x=3130, y=120 -->
      <bpmndi:BPMNShape id="Shape_End_CredencialOK" bpmnElement="End_CredencialOK">
        <dc:Bounds x="3112" y="102" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="3086" y="145" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ══════════════════════════════════════════
           LANE SISTEMA — SHAPES
           Lane y=230, h=200  → tareas en y=290, alto 80  → centro y=330
      ══════════════════════════════════════════ -->

      <!-- S01 Validar CURP: x=160, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_ValidarCURP" bpmnElement="Task_ValidarCURP">
        <dc:Bounds x="160" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW CURP válida: x=365, centro y=330 -->
      <bpmndi:BPMNShape id="Shape_GW_CURPValida" bpmnElement="GW_CURPValida" isMarkerVisible="true">
        <dc:Bounds x="365" y="305" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="330" y="362" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- End Error CURP: debajo del gateway, y=415 -->
      <bpmndi:BPMNShape id="Shape_End_ErrorCURP" bpmnElement="End_ErrorCURP">
        <dc:Bounds x="372" y="415" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="345" y="458" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- S02 Enviar email: x=630, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_EnviarEmail" bpmnElement="Task_EnviarEmail">
        <dc:Bounds x="630" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Timer: x=822, centro y=330 -->
      <bpmndi:BPMNShape id="Shape_Timer_EsperaEmail" bpmnElement="Timer_EsperaEmail">
        <dc:Bounds x="822" y="312" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="795" y="355" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- S03 Validar código: x=880, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_ValidarCodigo" bpmnElement="Task_ValidarCodigo">
        <dc:Bounds x="880" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW Código válido: x=1075, centro y=330 -->
      <bpmndi:BPMNShape id="Shape_GW_CodigoValido" bpmnElement="GW_CodigoValido" isMarkerVisible="true">
        <dc:Bounds x="1075" y="305" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="1040" y="362" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- S04 Procesar biometría: x=1810, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_ProcesarBiometria" bpmnElement="Task_ProcesarBiometria">
        <dc:Bounds x="1810" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW Biometría OK: x=2005, centro y=330 -->
      <bpmndi:BPMNShape id="Shape_GW_BiometriaOK" bpmnElement="GW_BiometriaOK" isMarkerVisible="true">
        <dc:Bounds x="2005" y="305" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="1970" y="362" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- End Error Biometría: debajo del gateway, y=415 -->
      <bpmndi:BPMNShape id="Shape_End_ErrorBiometria" bpmnElement="End_ErrorBiometria">
        <dc:Bounds x="2012" y="415" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="1985" y="458" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- S05 Generar credencial: x=2130, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_GenerarCredencial" bpmnElement="Task_GenerarCredencial">
        <dc:Bounds x="2130" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- S06 Validar CURP dependiente: x=2450, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_ValidarCURPDep" bpmnElement="Task_ValidarCURPDep">
        <dc:Bounds x="2450" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW CURP dependiente válida: x=2645, centro y=330 -->
      <bpmndi:BPMNShape id="Shape_GW_CURPDepValida" bpmnElement="GW_CURPDepValida" isMarkerVisible="true">
        <dc:Bounds x="2645" y="305" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2610" y="362" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- S07 Generar credencial dependiente: x=2770, y=290 -->
      <bpmndi:BPMNShape id="Shape_Task_GenerarCredencialDep" bpmnElement="Task_GenerarCredencialDep">
        <dc:Bounds x="2770" y="290" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- ══════════════════════════════════════════
           LANE BRIGADISTA — SHAPES
           Lane y=430, h=160  → tareas en y=470, alto 80  → centro y=510
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNShape id="Shape_Start_Brigadista" bpmnElement="Start_Brigadista">
        <dc:Bounds x="82" y="492" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="56" y="535" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Task_BrigIniciarSesion" bpmnElement="Task_BrigIniciarSesion">
        <dc:Bounds x="160" y="470" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Task_BrigIngresarCURP" bpmnElement="Task_BrigIngresarCURP">
        <dc:Bounds x="330" y="470" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Task_BrigConfirmarDatos" bpmnElement="Task_BrigConfirmarDatos">
        <dc:Bounds x="500" y="470" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Task_BrigGuardarPreregistro" bpmnElement="Task_BrigGuardarPreregistro">
        <dc:Bounds x="670" y="470" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Task_BrigCerrarSesion" bpmnElement="Task_BrigCerrarSesion">
        <dc:Bounds x="840" y="470" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_End_BrigOK" bpmnElement="End_BrigOK">
        <dc:Bounds x="1012" y="492" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="986" y="535" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ══════════════════════════════════════════
           LANE COORDINADOR REGIONAL — SHAPES
           Lane y=590, h=290
           4 tareas en paralelo → apiladas verticalmente
           Inicio sesión: y=625  (centro y=665)
           GW acciones  : centro y=665
           Tarea 1 (Gestionar usuarios)  : y=620  → fila superior
           Tarea 2 (Admin registros)     : y=700  → segunda fila
           Tarea 3 (Editar pre-registro) : y=780  → tercera fila
           Tarea 4 (Cambiar región)      : y=780  → misma fila que 3 (distinto x)
           Cerrar sesión: y=700 (fila media)
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNShape id="Shape_Start_CoordRegional" bpmnElement="Start_CoordRegional">
        <dc:Bounds x="82" y="716" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="56" y="759" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Iniciar sesión CR: x=160, y=695 -->
      <bpmndi:BPMNShape id="Shape_Task_CRIniciarSesion" bpmnElement="Task_CRIniciarSesion">
        <dc:Bounds x="160" y="695" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW CR Acciones: x=350, centro y=735 -->
      <bpmndi:BPMNShape id="Shape_GW_CRAcciones" bpmnElement="GW_CRAcciones" isMarkerVisible="true">
        <dc:Bounds x="350" y="710" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="315" y="767" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Tarea CR1 Gestionar usuarios: x=470, y=610 -->
      <bpmndi:BPMNShape id="Shape_Task_CRGestionarUsuarios" bpmnElement="Task_CRGestionarUsuarios">
        <dc:Bounds x="470" y="610" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Tarea CR2 Admin registros: x=470, y=700 -->
      <bpmndi:BPMNShape id="Shape_Task_CRAdminRegistros" bpmnElement="Task_CRAdminRegistros">
        <dc:Bounds x="470" y="700" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Tarea CR3 Editar pre-registro: x=470, y=790 -->
      <bpmndi:BPMNShape id="Shape_Task_CREditarPreregistro" bpmnElement="Task_CREditarPreregistro">
        <dc:Bounds x="470" y="790" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Tarea CR4 Cambiar región: x=640, y=790 -->
      <bpmndi:BPMNShape id="Shape_Task_CRCambiarRegion" bpmnElement="Task_CRCambiarRegion">
        <dc:Bounds x="640" y="790" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Cerrar sesión CR: x=810, y=695 -->
      <bpmndi:BPMNShape id="Shape_Task_CRCerrarSesion" bpmnElement="Task_CRCerrarSesion">
        <dc:Bounds x="810" y="695" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- End CR: x=992, centro y=735 -->
      <bpmndi:BPMNShape id="Shape_End_CoordRegionalOK" bpmnElement="End_CoordRegionalOK">
        <dc:Bounds x="992" y="716" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="966" y="759" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ══════════════════════════════════════════
           LANE COORDINADOR ESTATAL — SHAPES
           Lane y=880, h=280
           3 tareas en paralelo → apiladas verticalmente
           Inicio sesión: centro y=1005
           Tarea 1 Gestionar: y=930
           Tarea 2 Admin:     y=1010
           Tarea 3 Asignar:   y=1090
           Cerrar sesión: centro y=1010
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNShape id="Shape_Start_CoordEstatal" bpmnElement="Start_CoordEstatal">
        <dc:Bounds x="82" y="987" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="56" y="1030" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Iniciar sesión CE: x=160, y=965 -->
      <bpmndi:BPMNShape id="Shape_Task_CEIniciarSesion" bpmnElement="Task_CEIniciarSesion">
        <dc:Bounds x="160" y="965" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- GW CE Acciones: x=350, centro y=1005 -->
      <bpmndi:BPMNShape id="Shape_GW_CEAcciones" bpmnElement="GW_CEAcciones" isMarkerVisible="true">
        <dc:Bounds x="350" y="980" width="50" height="50"/>
        <bpmndi:BPMNLabel><dc:Bounds x="315" y="1037" width="120" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Tarea CE1 Gestionar usuarios: x=470, y=900 -->
      <bpmndi:BPMNShape id="Shape_Task_CEGestionarUsuarios" bpmnElement="Task_CEGestionarUsuarios">
        <dc:Bounds x="470" y="900" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Tarea CE2 Admin todos registros: x=470, y=985 -->
      <bpmndi:BPMNShape id="Shape_Task_CEAdminTodosRegistros" bpmnElement="Task_CEAdminTodosRegistros">
        <dc:Bounds x="470" y="985" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Tarea CE3 Asignar región: x=470, y=1070 -->
      <bpmndi:BPMNShape id="Shape_Task_CEAsignarRegion" bpmnElement="Task_CEAsignarRegion">
        <dc:Bounds x="470" y="1070" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Cerrar sesión CE: x=650, y=985 -->
      <bpmndi:BPMNShape id="Shape_Task_CECerrarSesion" bpmnElement="Task_CECerrarSesion">
        <dc:Bounds x="650" y="985" width="120" height="80"/>
      </bpmndi:BPMNShape>

      <!-- End CE: x=832, centro y=1005 -->
      <bpmndi:BPMNShape id="Shape_End_CoordEstatalOK" bpmnElement="End_CoordEstatalOK">
        <dc:Bounds x="832" y="987" width="36" height="36"/>
        <bpmndi:BPMNLabel><dc:Bounds x="806" y="1030" width="88" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ══════════════════════════════════════════
           EDGES — CIUDADANO (flujo horizontal izq→der)
           Tareas: centro y=120  |  Sistema: centro y=330
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNEdge id="Edge_SF_01" bpmnElement="SF_01">
        <di:waypoint x="118" y="120"/><di:waypoint x="160" y="120"/>
      </bpmndi:BPMNEdge>

      <!-- IngresarCURP→ValidarCURP: baja a Sistema -->
      <bpmndi:BPMNEdge id="Edge_SF_02" bpmnElement="SF_02">
        <di:waypoint x="220" y="160"/><di:waypoint x="220" y="290"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_03" bpmnElement="SF_03">
        <di:waypoint x="280" y="330"/><di:waypoint x="365" y="330"/>
      </bpmndi:BPMNEdge>

      <!-- GW_CURP→ConfirmarDatos: sube a Ciudadano -->
      <bpmndi:BPMNEdge id="Edge_SF_04_OK" bpmnElement="SF_04_OK">
        <di:waypoint x="415" y="330"/><di:waypoint x="530" y="330"/><di:waypoint x="530" y="160"/>
        <bpmndi:BPMNLabel><dc:Bounds x="435" y="312" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW_CURP→End_ErrorCURP: baja -->
      <bpmndi:BPMNEdge id="Edge_SF_04_ERR" bpmnElement="SF_04_ERR">
        <di:waypoint x="390" y="355"/><di:waypoint x="390" y="415"/>
        <bpmndi:BPMNLabel><dc:Bounds x="395" y="378" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_05" bpmnElement="SF_05">
        <di:waypoint x="590" y="120"/><di:waypoint x="630" y="120"/>
      </bpmndi:BPMNEdge>

      <!-- AceptarPrivacidad→EnviarEmail: baja a Sistema -->
      <bpmndi:BPMNEdge id="Edge_SF_06" bpmnElement="SF_06">
        <di:waypoint x="690" y="160"/><di:waypoint x="690" y="290"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_07" bpmnElement="SF_07">
        <di:waypoint x="750" y="330"/><di:waypoint x="822" y="330"/>
      </bpmndi:BPMNEdge>

      <!-- Timer→IngresarCodigo: sube a Ciudadano -->
      <bpmndi:BPMNEdge id="Edge_SF_08" bpmnElement="SF_08">
        <di:waypoint x="858" y="330"/><di:waypoint x="940" y="330"/><di:waypoint x="940" y="160"/>
      </bpmndi:BPMNEdge>

      <!-- IngresarCodigo→ValidarCodigo: baja a Sistema -->
      <bpmndi:BPMNEdge id="Edge_SF_09" bpmnElement="SF_09">
        <di:waypoint x="940" y="160"/><di:waypoint x="940" y="290"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_10" bpmnElement="SF_10">
        <di:waypoint x="1000" y="330"/><di:waypoint x="1075" y="330"/>
      </bpmndi:BPMNEdge>

      <!-- GW_Codigo→CrearContrasena: sube a Ciudadano -->
      <bpmndi:BPMNEdge id="Edge_SF_11_OK" bpmnElement="SF_11_OK">
        <di:waypoint x="1100" y="305"/><di:waypoint x="1100" y="230"/><di:waypoint x="1230" y="230"/><di:waypoint x="1230" y="160"/>
        <bpmndi:BPMNLabel><dc:Bounds x="1120" y="212" width="80" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW_Codigo→EnviarEmail: loop hacia atrás por debajo -->
      <bpmndi:BPMNEdge id="Edge_SF_11_Reenviar" bpmnElement="SF_11_Reenviar">
        <di:waypoint x="1100" y="355"/><di:waypoint x="1100" y="420"/><di:waypoint x="690" y="420"/><di:waypoint x="690" y="370"/>
        <bpmndi:BPMNLabel><dc:Bounds x="870" y="402" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_12" bpmnElement="SF_12">
        <di:waypoint x="1290" y="120"/><di:waypoint x="1330" y="120"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_13" bpmnElement="SF_13">
        <di:waypoint x="1450" y="120"/><di:waypoint x="1490" y="120"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_14" bpmnElement="SF_14">
        <di:waypoint x="1610" y="120"/><di:waypoint x="1650" y="120"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_15" bpmnElement="SF_15">
        <di:waypoint x="1770" y="120"/><di:waypoint x="1810" y="120"/>
      </bpmndi:BPMNEdge>

      <!-- CapturarRostro→ProcesarBiometría: baja a Sistema -->
      <bpmndi:BPMNEdge id="Edge_SF_16" bpmnElement="SF_16">
        <di:waypoint x="1870" y="160"/><di:waypoint x="1870" y="290"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_17" bpmnElement="SF_17">
        <di:waypoint x="1930" y="330"/><di:waypoint x="2005" y="330"/>
      </bpmndi:BPMNEdge>

      <!-- GW_Bio→GenerarCredencial: horizontal -->
      <bpmndi:BPMNEdge id="Edge_SF_18_OK" bpmnElement="SF_18_OK">
        <di:waypoint x="2055" y="330"/><di:waypoint x="2130" y="330"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2063" y="312" width="60" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW_Bio→End_ErrorBio: baja -->
      <bpmndi:BPMNEdge id="Edge_SF_18_ERR" bpmnElement="SF_18_ERR">
        <di:waypoint x="2030" y="355"/><di:waypoint x="2030" y="415"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2035" y="378" width="80" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GenerarCredencial→DescargarCredencial: sube a Ciudadano -->
      <bpmndi:BPMNEdge id="Edge_SF_19" bpmnElement="SF_19">
        <di:waypoint x="2190" y="290"/><di:waypoint x="2190" y="160"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_20" bpmnElement="SF_20">
        <di:waypoint x="2250" y="120"/><di:waypoint x="2325" y="120"/>
      </bpmndi:BPMNEdge>

      <!-- GW_MasDep→IngresarCURPDep: horizontal (Sí) -->
      <bpmndi:BPMNEdge id="Edge_SF_21_SI" bpmnElement="SF_21_SI">
        <di:waypoint x="2375" y="120"/><di:waypoint x="2450" y="120"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2383" y="102" width="30" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW_MasDep→CerrarSesion: salta al final (No) -->
      <bpmndi:BPMNEdge id="Edge_SF_21_NO" bpmnElement="SF_21_NO">
        <di:waypoint x="2350" y="145"/><di:waypoint x="2350" y="210"/><di:waypoint x="2990" y="210"/><di:waypoint x="2990" y="160"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2640" y="192" width="20" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- IngresarCURPDep→ValidarCURPDep: baja a Sistema -->
      <bpmndi:BPMNEdge id="Edge_SF_22" bpmnElement="SF_22">
        <di:waypoint x="2510" y="160"/><di:waypoint x="2510" y="290"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_23" bpmnElement="SF_23">
        <di:waypoint x="2570" y="330"/><di:waypoint x="2645" y="330"/>
      </bpmndi:BPMNEdge>

      <!-- GW_CURPDep→ConfirmarDatosDep: sube a Ciudadano -->
      <bpmndi:BPMNEdge id="Edge_SF_24_OK" bpmnElement="SF_24_OK">
        <di:waypoint x="2695" y="330"/><di:waypoint x="2830" y="330"/><di:waypoint x="2830" y="160"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2730" y="312" width="60" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW_CURPDep→IngresarCURPDep: loop hacia atrás -->
      <bpmndi:BPMNEdge id="Edge_SF_24_ERR_Loop" bpmnElement="SF_24_ERR_Loop">
        <di:waypoint x="2670" y="355"/><di:waypoint x="2670" y="440"/><di:waypoint x="2510" y="440"/><di:waypoint x="2510" y="160"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2560" y="422" width="90" height="27"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- ConfirmarDatosDep→GenerarCredencialDep: baja a Sistema -->
      <bpmndi:BPMNEdge id="Edge_SF_25" bpmnElement="SF_25">
        <di:waypoint x="2830" y="160"/><di:waypoint x="2830" y="290"/>
      </bpmndi:BPMNEdge>

      <!-- GenerarCredencialDep→GW_MasDependientes: loop por arriba -->
      <bpmndi:BPMNEdge id="Edge_SF_DepLoop" bpmnElement="SF_DepLoop">
        <di:waypoint x="2830" y="290"/><di:waypoint x="2830" y="40"/><di:waypoint x="2350" y="40"/><di:waypoint x="2350" y="95"/>
        <bpmndi:BPMNLabel><dc:Bounds x="2540" y="22" width="120" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SF_26" bpmnElement="SF_26">
        <di:waypoint x="3050" y="120"/><di:waypoint x="3112" y="120"/>
      </bpmndi:BPMNEdge>

      <!-- ══════════════════════════════════════════
           EDGES — BRIGADISTA
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNEdge id="Edge_SFB_01" bpmnElement="SFB_01">
        <di:waypoint x="118" y="510"/><di:waypoint x="160" y="510"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFB_02" bpmnElement="SFB_02">
        <di:waypoint x="280" y="510"/><di:waypoint x="330" y="510"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFB_03" bpmnElement="SFB_03">
        <di:waypoint x="450" y="510"/><di:waypoint x="500" y="510"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFB_04" bpmnElement="SFB_04">
        <di:waypoint x="620" y="510"/><di:waypoint x="670" y="510"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFB_05" bpmnElement="SFB_05">
        <di:waypoint x="790" y="510"/><di:waypoint x="840" y="510"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFB_06" bpmnElement="SFB_06">
        <di:waypoint x="960" y="510"/><di:waypoint x="1012" y="510"/>
      </bpmndi:BPMNEdge>

      <!-- Brigadista→IniciarSesion Ciudadano (inter-lane, sube) -->
      <bpmndi:BPMNEdge id="Edge_SF_BrigDerivaCiudadano" bpmnElement="SF_BrigDerivaCiudadano">
        <di:waypoint x="730" y="470"/><di:waypoint x="730" y="30"/><di:waypoint x="1390" y="30"/><di:waypoint x="1390" y="80"/>
        <bpmndi:BPMNLabel><dc:Bounds x="960" y="12" width="190" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- ══════════════════════════════════════════
           EDGES — COORDINADOR REGIONAL
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNEdge id="Edge_SFCR_01" bpmnElement="SFCR_01">
        <di:waypoint x="118" y="735"/><di:waypoint x="160" y="735"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFCR_02" bpmnElement="SFCR_02">
        <di:waypoint x="280" y="735"/><di:waypoint x="350" y="735"/>
      </bpmndi:BPMNEdge>

      <!-- GW→Gestionar usuarios (arriba) -->
      <bpmndi:BPMNEdge id="Edge_SFCR_03a" bpmnElement="SFCR_03a">
        <di:waypoint x="375" y="710"/><di:waypoint x="375" y="650"/><di:waypoint x="470" y="650"/>
        <bpmndi:BPMNLabel><dc:Bounds x="390" y="668" width="80" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW→Admin registros (horizontal) -->
      <bpmndi:BPMNEdge id="Edge_SFCR_03b" bpmnElement="SFCR_03b">
        <di:waypoint x="400" y="735"/><di:waypoint x="470" y="740"/>
        <bpmndi:BPMNLabel><dc:Bounds x="408" y="718" width="90" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW→Editar pre-registro (abajo izq) -->
      <bpmndi:BPMNEdge id="Edge_SFCR_03c" bpmnElement="SFCR_03c">
        <di:waypoint x="375" y="760"/><di:waypoint x="375" y="830"/><di:waypoint x="470" y="830"/>
        <bpmndi:BPMNLabel><dc:Bounds x="390" y="808" width="80" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW→Cambiar región (abajo der) -->
      <bpmndi:BPMNEdge id="Edge_SFCR_03d" bpmnElement="SFCR_03d">
        <di:waypoint x="400" y="755"/><di:waypoint x="450" y="755"/><di:waypoint x="450" y="830"/><di:waypoint x="640" y="830"/>
        <bpmndi:BPMNLabel><dc:Bounds x="500" y="812" width="80" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- Gestionar usuarios→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCR_04a" bpmnElement="SFCR_04a">
        <di:waypoint x="590" y="650"/><di:waypoint x="870" y="650"/><di:waypoint x="870" y="695"/>
      </bpmndi:BPMNEdge>

      <!-- Admin registros→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCR_04b" bpmnElement="SFCR_04b">
        <di:waypoint x="590" y="740"/><di:waypoint x="810" y="735"/>
      </bpmndi:BPMNEdge>

      <!-- Editar pre-registro→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCR_04c" bpmnElement="SFCR_04c">
        <di:waypoint x="590" y="830"/><di:waypoint x="870" y="830"/><di:waypoint x="870" y="775"/>
      </bpmndi:BPMNEdge>

      <!-- Cambiar región→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCR_04d" bpmnElement="SFCR_04d">
        <di:waypoint x="760" y="830"/><di:waypoint x="870" y="830"/><di:waypoint x="870" y="775"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SFCR_05" bpmnElement="SFCR_05">
        <di:waypoint x="930" y="735"/><di:waypoint x="992" y="735"/>
      </bpmndi:BPMNEdge>

      <!-- ══════════════════════════════════════════
           EDGES — COORDINADOR ESTATAL
      ══════════════════════════════════════════ -->

      <bpmndi:BPMNEdge id="Edge_SFCE_01" bpmnElement="SFCE_01">
        <di:waypoint x="118" y="1005"/><di:waypoint x="160" y="1005"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_SFCE_02" bpmnElement="SFCE_02">
        <di:waypoint x="280" y="1005"/><di:waypoint x="350" y="1005"/>
      </bpmndi:BPMNEdge>

      <!-- GW→Gestionar usuarios (arriba) -->
      <bpmndi:BPMNEdge id="Edge_SFCE_03a" bpmnElement="SFCE_03a">
        <di:waypoint x="375" y="980"/><di:waypoint x="375" y="940"/><di:waypoint x="470" y="940"/>
        <bpmndi:BPMNLabel><dc:Bounds x="390" y="952" width="80" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW→Admin todos registros (horizontal) -->
      <bpmndi:BPMNEdge id="Edge_SFCE_03b" bpmnElement="SFCE_03b">
        <di:waypoint x="400" y="1005"/><di:waypoint x="470" y="1025"/>
        <bpmndi:BPMNLabel><dc:Bounds x="408" y="1005" width="100" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- GW→Asignar región (abajo) -->
      <bpmndi:BPMNEdge id="Edge_SFCE_03c" bpmnElement="SFCE_03c">
        <di:waypoint x="375" y="1030"/><di:waypoint x="375" y="1110"/><di:waypoint x="470" y="1110"/>
        <bpmndi:BPMNLabel><dc:Bounds x="390" y="1088" width="80" height="14"/></bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- Gestionar usuarios→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCE_04a" bpmnElement="SFCE_04a">
        <di:waypoint x="590" y="940"/><di:waypoint x="710" y="940"/><di:waypoint x="710" y="985"/>
      </bpmndi:BPMNEdge>

      <!-- Admin todos registros→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCE_04b" bpmnElement="SFCE_04b">
        <di:waypoint x="590" y="1025"/><di:waypoint x="650" y="1025"/>
      </bpmndi:BPMNEdge>

      <!-- Asignar región→Cerrar sesión -->
      <bpmndi:BPMNEdge id="Edge_SFCE_04c" bpmnElement="SFCE_04c">
        <di:waypoint x="590" y="1110"/><di:waypoint x="710" y="1110"/><di:waypoint x="710" y="1065"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Edge_SFCE_05" bpmnElement="SFCE_05">
        <di:waypoint x="770" y="1025"/><di:waypoint x="832" y="1005"/>
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</definitions>
